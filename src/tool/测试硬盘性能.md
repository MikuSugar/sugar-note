# 测试硬盘性能
## Linux上测试
使用`dd` 命令简单测试硬盘
```shell
dd if=/dev/zero of=/data/disk1/tmp/test1.img bs=1G count=1 oflag=dsync
```
参数解释 
- `if=/dev/zero` (if=/dev/input.file) ：用来设置dd命令读取的输入文件名。
- `of=/data/disk1/tmp/test1.img` (of=/path/to/output.file)：dd命令将input.file写入的输出文件的名字。
- `bs=1G` (bs=block-size) ：设置dd命令读取的块的大小。例子中为1个G;bs选项的默认单位是bytes
- `count=1` (count=number-of-blocks)：dd命令读取的块的个数。
- `oflag=dsync` (oflag=dsync) ：使用同步I/O。不要省略这个选项。这个选项能够帮助你去除caching的影响，以便呈现给你精准的结果。
- `conv=fdatasyn`: 这个选项和`oflag=dsync`含义一样。


普通HDD写速度:

| 文件信息      | 速度    |
| ------------- | ------- |
| 1G            | 134MB/S |
| 512bytes*1000 | 265KB/s |
| 4k*1000       | 2.1MB/s |
| 8k*1000       | 4.2MB/S |

AWS EBS写速度（t3.micro）:

| 文件信息      | 速度    |
| ------------- | ------- |
| 300MB         | 219MB/S |
| 512bytes*1000 | 382kb/s |
| 4k*1000       | 3.3MB/S |
| 8k*1000       | 6.7MB/S |

## Mac 上测试

Mac 上的dd命令 单位是小写，如GB位g，MB位m。

例子：

```shell
dd if=/dev/zero of=test1.img bs=1g count=1  2>&1 | grep sec | awk '{print $1 / 1024 / 1024 / $5, "MB/sec" }'
```



SSD写速度

| 文件信息      | 速度         |
| ------------- | ------------ |
| 1G            | 2361.93 MB/s |
| 512bytes*1000 | 20MB/s       |
| 4k*1000       | 823.93Mb/s   |
| 8k*1000       | 1505.88Mb/s  |
